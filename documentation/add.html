<!DOCTYPE html>
<!--[if lt IE 7]>		<html class="no-js ie6"> <![endif]-->
<!--[if IE 7]>			<html class="no-js ie7"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie8"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html class="no-js"> <!--<![endif]-->
	<head lang="en">
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Add | Friends | Solspace Addon Documentation</title>
		<meta name="description" content="" />
		<meta name="copyright" content="(c) 2010 Copyright content: Copyright design: Solspace, Inc."/>
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" href="assets/css/normalize.css" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="assets/fancybox/jquery.fancybox-1.3.4.css" />
		<link href="assets/syntaxhighlighter/styles/shCore.css" rel="stylesheet" type="text/css" />
		<link href="assets/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
		<script src="assets/js/modernizr.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 8]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->

		<header>
			<div class="header-inner">
				<div class="logo">
					<img src="assets/images/logo.png" />
				</div>

				<div class="bread_crumbs">
					<ul class="crumbs">
						<li class="first"><a href="index.html">Friends</a></li>
						<li>Add</li>
					</ul>
				</div>
			</div>
		</header>

		<div class="content-wrapper">
			<nav class="toc">
				<ul>
<li><a href="https://solspace.com/expressionengine/friends">More Info | Purchase</a></li>
<li><a href="change_log.html">Change Log</a></li>
<li><a href="install_update.html">Install / Update</a></li>
<li><a href="control_panel.html">Control Panel</a></li>
<li><a href="extension_hooks.html">Extension Hooks</a></li>
<li class="template_tags"><h3>Template Tags</h3></li>
<li><p>Basic:</p>

<ul>
<li class="current"><a href="add.html">Add</a></li>
<li><a href="form.html">Form</a></li>
<li><a href="hug.html">Hug</a></li>
<li><a href="hugs.html">Hugs</a></li>
<li><a href="invites.html">Invites</a></li>
<li><a href="members.html">Members</a></li>
<li><a href="mine.html">Mine</a></li>
<li><a href="mutual_friends.html">Mutual Friends</a></li>
</ul></li>
<li><p>Profile Wall:</p>

<ul>
<li><a href="profile_wall.html">Profile Wall</a></li>
<li><a href="profile_wall_comment_delete.html">Profile Wall Comment Delete</a></li>
<li><a href="profile_wall_form.html">Profile Wall Form</a></li>
</ul></li>
<li><p>Status Updates:</p>

<ul>
<li><a href="status.html">Status</a></li>
<li><a href="status_delete.html">Status Delete</a></li>
<li><a href="status_form.html">Status Form</a></li>
</ul></li>
<li><p>Groups:</p>

<ul>
<li><a href="groups.html">Groups</a></li>
<li><a href="group_add.html">Group Add</a></li>
<li><a href="group_delete.html">Group Delete</a></li>
<li><a href="group_entries.html">Group Entries</a></li>
<li><a href="group_entry_add.html">Group Entry Add</a></li>
<li><a href="group_form.html">Group Form</a></li>
<li><a href="group_members.html">Group Members</a></li>
<li><a href="member_of_group.html">Member Of Group</a></li>
<li><a href="group_wall.html">Group Wall</a></li>
<li><a href="group_wall_comment_delete.html">Group Wall Comment Delete</a></li>
<li><a href="group_wall_form.html">Group Wall Form</a></li>
</ul></li>
<li><p>Messages:</p>

<ul>
<li><a href="messages.html">Messages</a></li>
<li><a href="message_delete.html">Message Delete</a></li>
<li><a href="message_folders.html">Message Folders</a></li>
<li><a href="message_folder_form.html">Message Folder Form</a></li>
<li><a href="message_folder_name.html">Message Folder Name</a></li>
<li><a href="message_form.html">Message Form</a></li>
<li><a href="message_move.html">Message Move</a></li>
</ul></li>
<li><p>Referrals:</p>

<ul>
<li><a href="referral_invite_form.html">Referral Invite Form</a></li>
<li><a href="referral_referral_count.html">Referral Count</a></li>
</ul></li>
<li><h3>Requirements</h3><div class="requirements">

<ul>
<li>EE 2.10.x</li>
<li>PHP 5.2+</li>
<li>MySQL 5+</li>
<li>All modern browsers or IE 10+</li>
</ul></div></li>
</ul>
			</nav>

			<article class="docs">
				<p>The <em>Friends:Add</em> function is how your users will normally add other
users to their Friends list. This is done with friend requests and
confirming, just like in Facebook. You create links on other templates
that link to a template with this code on it. Based on the member ID in
the URI, the <em>Friends:Add</em> function will output a success/failure
message, and it will take care of the rest. Additionally, notifications
can be sent out to other members when you request or confirm them as a
friend.</p>

<p>To remove a user from your friends list, your link to this template
would look exactly the same, except you would append a <em>delete</em> segment
at the end of the URL. To block friend requests from a specific member,
you would append a <em>block</em> segment at the end of the URL.</p>

<pre class="brush: html;">{exp:friends:add} content {/exp:friends:add}</pre>

<ul>
<li><a href="#parameters">Parameters</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#conditionals">Conditionals</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#notifications">Notification Templates</a></li>
</ul>

<p><a name="parameters"></a></p>

<h2>Parameters</h2>

<p>The following parameters are available for use:</p>

<ul>
<li><a href="#notification_confirm">notification_confirm</a></li>
<li><a href="#notification_request">notification_request</a></li>
<li><a href="#subject_confirm">subject_confirm</a></li>
<li><a href="#subject_request">subject_request</a></li>
<li><a href="#trigger">trigger</a></li>
</ul>

<p><a name="notification_confirm"></a></p>

<h3>notification_confirm=</h3>

<pre class="brush: html;">notification_confirm="friends_notifications/friend_confirm"</pre>

<p>This parameter controls which EE template to use
for your friend confirm notification template. This is the template that
will be used for the message that someone receives when their friend
request has been confirmed by the other user.</p>

<p><a name="notification_request"></a></p>

<h3>notification_request=</h3>

<pre class="brush: html;">notification_request="friends_notifications/friend_request"</pre>

<p>This parameter controls which EE template to use
for your friend request notification template. This is the template that
will be used for the message that someone receives when a user has
requested to be friends with them.</p>

<p><a name="subject_confirm"></a></p>

<h3>subject_confirm=</h3>

<pre class="brush: html;">subject_confirm="{friends_inviter_screen_name} has confirmed you as a Friend!"</pre>

<p>This parameter outputs the subject line for the
notification email when a user is confirming a friend request.</p>

<p><a name="subject_request"></a></p>

<h3>subject_request=</h3>

<pre class="brush: html;">subject_request="{friends_inviter_screen_name} has added you as a Friend!"</pre>

<p>This parameter outputs the subject line for the
notification email when a user is initiating a friend request.</p>

<p><a name="trigger"></a></p>

<h3>trigger=</h3>

<pre class="brush: html;">trigger="cheese"</pre>

<p>If you'd like to specify a username in the URI when coding a link to the
Add function template, this parameter allows you to specify
which trigger you're using in the URI to prepend the username segment.
For example, your link might look like this:
<strong>http://www.yoursite.com/friends/add/cheese/pie_man/</strong></p>

<p><a name="variables"></a></p>

<h2>Variables</h2>

<p>The following variables are available for use:</p>

<ul>
<li><a href="#friends_invitee_member_field">friends_invitee_member_field</a></li>
<li><a href="#friends_inviter_member_field">friends_inviter_member_field</a></li>
<li><a href="#friends_message">friends_message</a></li>
</ul>

<p><a name="friends_invitee_member_field"></a></p>

<h3>friends_invitee_member_field</h3>

<pre class="brush: html;">{friends_invitee_member_field}</pre>

<p>You can parse standard member fields for both the invitee and inviter
for use in the <a href="#notifications">Notification Templates</a> as well as the
<a href="#subject_request">subject_request</a> and
<a href="#subject_confirm">subject_confirm</a> parameters. To parse standard
member fields for the invitee, prepend your variables with
<em>friends_invitee&#95;</em>. To construct this variable, simply use
<strong>friends_invitee&#95;</strong> + <strong>member_field_name</strong>.</p>

<p><a name="friends_inviter_member_field"></a></p>

<h3>friends_inviter_member_field</h3>

<pre class="brush: html;">{friends_inviter_member_field}</pre>

<p>You can parse standard member fields for both the invitee and inviter
for use in the <a href="#notifications">Notification Templates</a> as well as the
<a href="#subject_request">subject_request</a> and
<a href="#subject_confirm">subject_confirm</a> parameters. To parse standard
member fields for the inviter, prepend your variables with
<em>friends_inviter&#95;</em>. To construct this variable, simply use
<strong>friends_inviter&#95;</strong> + <strong>member_field_name</strong>.</p>

<p><a name="friends_message"></a></p>

<h3>friends_message</h3>

<pre class="brush: html;">{friends_message}</pre>

<p>This variable will output the success message or any
errors upon loading the <em>Friends:Add</em> template.</p>

<p><a name="conditionals"></a></p>

<h2>Conditionals</h2>

<p>The following conditionals are available for use:</p>

<ul>
<li><a href="#failure">failure</a></li>
<li><a href="#success">success</a></li>
</ul>

<p><a name="failure"></a></p>

<h3>failure</h3>

<pre class="brush: html;">{if failure}Error!{/if}</pre>

<p>This conditional shows its contents if the request action
DOES NOT execute successfully.</p>

<p><a name="success"></a></p>

<h3>success</h3>

<pre class="brush: html;">{if success}Successful!{/if}</pre>

<p>This conditional shows its contents if the request action
executes successfully.</p>

<p><a name="examples"></a></p>

<h2>Examples</h2>

<p>The following code should be a complete example for using this function,
as well as using notifications:</p>

<pre class="brush: html;">{exp:friends:add
    notification_request="friends_notifications/friend_request"
    notification_confirm="friends_notifications/friend_confirm"
    subject_request="{friends_inviter_screen_name} added you as a friend!"
    subject_confirm="{friends_inviter_screen_name} confirmed your friend request!"
}

    {if success}
        &lt;h3&gt;Successful!&lt;/h3&gt;
    {/if}
    {if failure}
        &lt;h3&gt;Error!&lt;/h3&gt;
    {/if}

    &lt;p&gt;{friends_message}&lt;/p&gt;

{/exp:friends:add}
</pre>

<p>If this template was located at <strong>friends/add</strong>, you would link to this
page from another template like one of the options below:</p>

<ul>
<li><strong>http://www.yoursite.com/friends/add/MEMBER_ID/</strong></li>
<li><strong>http://www.yoursite.com/friends/add/trigger/MEMBER_ID/</strong></li>
</ul>

<p>To remove a friend or a friend request, you would link to this page with one of these options:</p>

<ul>
<li><strong>http://www.yoursite.com/friends/add/MEMBER_ID/delete/</strong></li>
<li><strong>http://www.yoursite.com/friends/add/trigger/MEMBER_ID/delete/</strong></li>
</ul>

<p>To block a user from sending you friend requests, you would link to this
page with one of these options:</p>

<ul>
<li><strong>http://www.yoursite.com/friends/add/MEMBER_ID/block/</strong></li>
<li><strong>http://www.yoursite.com/friends/add/trigger/MEMBER_ID/block/</strong></li>
</ul>

<p><a name="notifications"></a></p>

<h2>Notification Templates</h2>

<p>For your notification templates, you use regular EE templates, and just
add code like this:</p>

<p><a name="friend_request"></a></p>

<h3>Friend Request ("friends_notifications/friend_request")</h3>

<pre class="brush: html;">Hello {friends_invitee_screen_name}!

You have just received a Friend Request from
{friends_inviter_screen_name}.

Click the link below to accept this invitation:
{path='friends/add'}/{friends_inviter_member_id}/
</pre>

<p><a name="friend_confirm"></a></p>

<h3>Friend Confirm ("friends_notifications/friend_confirm")</h3>

<pre class="brush: html;">Hello {friends_invitee_screen_name}!

You are now friends with {friends_inviter_screen_name}
because they have accepted your invitation.

Click the link below to view their profile:
{path='friends/profile'}/{friends_inviter_member_id}/
</pre>
			</article>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shCore.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shAutoloader.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>