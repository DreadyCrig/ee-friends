<!DOCTYPE html>
<!--[if lt IE 7]>		<html class="no-js ie6"> <![endif]-->
<!--[if IE 7]>			<html class="no-js ie7"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie8"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html class="no-js"> <!--<![endif]-->
	<head lang="en">
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Group Entry Add | Friends | Solspace Addon Documentation</title>
		<meta name="description" content="" />
		<meta name="copyright" content="(c) 2010 Copyright content: Copyright design: Solspace, Inc."/>
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" href="assets/css/normalize.css" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="assets/fancybox/jquery.fancybox-1.3.4.css" />
		<link href="assets/syntaxhighlighter/styles/shCore.css" rel="stylesheet" type="text/css" />
		<link href="assets/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
		<script src="assets/js/modernizr.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 8]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->

		<header>
			<div class="header-inner">
				<div class="logo">
					<img src="assets/images/logo.png" />
				</div>

				<div class="bread_crumbs">
					<ul class="crumbs">
						<li class="first"><a href="index.html">Friends</a></li>
						<li>Group Entry Add</li>
					</ul>
				</div>
			</div>
		</header>

		<div class="content-wrapper">
			<nav class="toc">
				<ul>
<li><a href="https://solspace.com/expressionengine/friends">More Info | Purchase</a></li>
<li><a href="change_log.html">Change Log</a></li>
<li><a href="install_update.html">Install / Update</a></li>
<li><a href="control_panel.html">Control Panel</a></li>
<li><a href="extension_hooks.html">Extension Hooks</a></li>
<li class="template_tags"><h3>Template Tags</h3></li>
<li><p>Basic:</p>

<ul>
<li><a href="add.html">Add</a></li>
<li><a href="form.html">Form</a></li>
<li><a href="hug.html">Hug</a></li>
<li><a href="hugs.html">Hugs</a></li>
<li><a href="invites.html">Invites</a></li>
<li><a href="members.html">Members</a></li>
<li><a href="mine.html">Mine</a></li>
<li><a href="mutual_friends.html">Mutual Friends</a></li>
</ul></li>
<li><p>Profile Wall:</p>

<ul>
<li><a href="profile_wall.html">Profile Wall</a></li>
<li><a href="profile_wall_comment_delete.html">Profile Wall Comment Delete</a></li>
<li><a href="profile_wall_form.html">Profile Wall Form</a></li>
</ul></li>
<li><p>Status Updates:</p>

<ul>
<li><a href="status.html">Status</a></li>
<li><a href="status_delete.html">Status Delete</a></li>
<li><a href="status_form.html">Status Form</a></li>
</ul></li>
<li><p>Groups:</p>

<ul>
<li><a href="groups.html">Groups</a></li>
<li><a href="group_add.html">Group Add</a></li>
<li><a href="group_delete.html">Group Delete</a></li>
<li><a href="group_entries.html">Group Entries</a></li>
<li class="current"><a href="group_entry_add.html">Group Entry Add</a></li>
<li><a href="group_form.html">Group Form</a></li>
<li><a href="group_members.html">Group Members</a></li>
<li><a href="member_of_group.html">Member Of Group</a></li>
<li><a href="group_wall.html">Group Wall</a></li>
<li><a href="group_wall_comment_delete.html">Group Wall Comment Delete</a></li>
<li><a href="group_wall_form.html">Group Wall Form</a></li>
</ul></li>
<li><p>Messages:</p>

<ul>
<li><a href="messages.html">Messages</a></li>
<li><a href="message_delete.html">Message Delete</a></li>
<li><a href="message_folders.html">Message Folders</a></li>
<li><a href="message_folder_form.html">Message Folder Form</a></li>
<li><a href="message_folder_name.html">Message Folder Name</a></li>
<li><a href="message_form.html">Message Form</a></li>
<li><a href="message_move.html">Message Move</a></li>
</ul></li>
<li><p>Referrals:</p>

<ul>
<li><a href="referral_invite_form.html">Referral Invite Form</a></li>
<li><a href="referral_referral_count.html">Referral Count</a></li>
</ul></li>
<li><h3>Requirements</h3><div class="requirements">

<ul>
<li>EE 2.10.x</li>
<li>PHP 5.2+</li>
<li>MySQL 5+</li>
<li>All modern browsers or IE 10+</li>
</ul></div></li>
</ul>
			</nav>

			<article class="docs">
				<p>The <em>Friends:Group_Entry_Add</em> function is part of the Group feature of
Friends. It allows your users to add channel entries to their Friends
group(s). It is a form function that is placed into a template and
submitted as a POST to another template with the
<em>Friends:Group_Entry_Add</em> function. The <em>Friends:Group_Entry_Add</em>
function will then display a success or error message accordingly. It
also allows you to send notifications to members of your group,
mentioning that the entry has been added to the Group.</p>

<pre class="brush: html;">{exp:friends:group_entry_add} content {/exp:friends:group_entry_add}</pre>

<ul>
<li><a href="#parameters">Parameters</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#variable_pairs">Variable Pairs</a></li>
<li><a href="#conditionals">Conditionals</a></li>
<li><a href="#form_fields">Form Fields</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#setup">Setup</a></li>
<li><a href="#channel_form">Using with Channel Form</a></li>
<li><a href="#notifications">Notification Templates</a></li>
</ul>

<p><a name="parameters"></a></p>

<h2>Parameters</h2>

<p>The following parameters are available for use:</p>

<ul>
<li><a href="#dynamic">dynamic</a></li>
<li><a href="#entry_id">entry_id</a></li>
<li><a href="#friends_group_id">friends_group_id[]</a></li>
<li><a href="#notification_template">notification_template</a></li>
<li><a href="#subject">subject</a></li>
</ul>

<p><a name="dynamic"></a></p>

<h3>dynamic=</h3>

<pre class="brush: html;">dynamic="off"</pre>

<p>This parameter is available to stop the loop from looking into
the URI for a message ID.</p>

<p><a name="entry_id"></a></p>

<h3>entry_id=</h3>

<pre class="brush: html;">entry_id="{segment_4}"</pre>

<p>You would normally submit a POST request though a form to the
<em>Friends:Group_Entry_Add</em> function, but this parameter is
available to use, should you need to pass the entry ID through the URI
or an embed.</p>

<p><a name="friends_group_id"></a></p>

<h3>friends_group_id=</h3>

<pre class="brush: html;">friends_group_id="{segment_3}"</pre>

<p>You would normally submit a POST request though a form to the
<em>Friends:Group_Entry_Add</em> function, but this
parameter is available to use, should you need to pass the group ID
through the URI or an embed.</p>

<p><a name="group_name"></a></p>

<h3>group_name=</h3>

<pre class="brush: html;">group_name="{segment_3}"</pre>

<p>You would normally submit a POST request though a form to the
<em>Friends:Group_Entry_Add</em> function, but this parameter is
available to use, should you need to pass the group short_name through
the URI or an embed.</p>

<p><a name="notification_template"></a></p>

<h3>notification_template=</h3>

<pre class="brush: html;">notification_template="friends_notifications/group_entry_add"</pre>

<p>This parameter allows you specify an EE template
to generate and format a notification to all of the members of the
group, informing them of the new entry added. If this is not specified,
a notification will NOT be sent.</p>

<p><a name="subject"></a></p>

<h3>subject=</h3>

<pre class="brush: html;">subject="A new entry titled {title} has been added to your group"</pre>

<p>This parameter allows you specify the subject line message to
generate for an email notification to all of the members of the group,
informing them of the new entry added.</p>

<p><a name="variables"></a></p>

<h2>Variables</h2>

<p>The following variables are available for use:</p>

<ul>
<li><a href="#friends_message">friends_message</a></li>
<li><a href="#friends_recipient_member_field">friends_recipient_member_field</a></li>
<li><a href="#friends_sender_member_field">friends_sender_member_field</a></li>
</ul>

<p><a name="friends_message"></a></p>

<h3>friends_message</h3>

<pre class="brush: html;">{friends_message}</pre>

<p>This variable will output the success message or any
errors upon loading the <em>Friends:Group_Entry_Add</em> template.</p>

<p><a name="friends_recipient_member_field"></a></p>

<h3>friends_recipient_member_field</h3>

<pre class="brush: html;">{friends_recipient_member_field}</pre>

<p>You can parse any of the standard member fields (including
<strong>screen_name</strong>, <strong>username</strong>, and <strong>member_id</strong>) for both the sender
and the recipient for use in the <a href="#notifications">Notification Templates</a> as
well as the <a href="#subject">subject</a> parameter. To parse these member fields
for the recipient, prepend the variables with <em>friends_recipient&#95;</em>. To
construct this variable, simply use <strong>friends_recipient&#95;</strong> +
<strong>member_field_name</strong>.</p>

<p><a name="friends_sender_member_field"></a></p>

<h3>friends_sender_member_field</h3>

<pre class="brush: html;">{friends_sender_member_field}</pre>

<p>You can parse any of the standard member fields (including
<strong>screen_name</strong>, <strong>username</strong>, and <strong>member_id</strong>) for both the sender
and the recipient for use in the <a href="#notifications">Notification Templates</a> as
well as the <a href="#subject">subject</a> parameter. To parse these member fields
for the sender, prepend the variables with <em>friends_sender&#95;</em>. To
construct this variable, simply use <strong>friends_sender&#95;</strong> +
<strong>member_field_name</strong>.</p>

<p><a name="variable_pairs"></a></p>

<h2>Variable Pairs</h2>

<p>The following variable pairs are available for use:</p>

<ul>
<li><a href="#entries">entries</a></li>
</ul>

<p><a name="entries"></a></p>

<h3>entries</h3>

<pre class="brush: html;">{entries} {/entries}</pre>

<p>This variable pair allows you to display data for the channel
entries added to a group, available in the <a href="#notifications">Notification
Template</a>, and controls the formating of a list of entries
since more than 1 channel entry can be assigned to a group in a single
submission. Most usual <em>Channel:Entries</em> tag variables become available within
this loop (ex: <strong>title</strong>, <strong>url_title</strong>, etc), and they need to be
prepended with <em>friends&#95;</em>. To construct this variable, simply use
<strong>friends&#95;</strong> + <strong>field_name</strong>.</p>

<p><a name="conditionals"></a></p>

<h2>Conditionals</h2>

<p>The following conditionals are available for use:</p>

<ul>
<li><a href="#failure">failure</a></li>
<li><a href="#success">success</a></li>
</ul>

<p><a name="failure"></a></p>

<h3>failure</h3>

<pre class="brush: html;">{if failure}
    Error!
{/if}
</pre>

<p>This conditional shows its contents if the request action
DOES NOT execute successfully.</p>

<p><a name="success"></a></p>

<h3>success</h3>

<pre class="brush: html;">{if success}
    Successful!
{/if}
</pre>

<p>This conditional shows its contents if the request action
executes successfully.</p>

<p><a name="form_fields"></a></p>

<h2>Form Fields</h2>

<p>The following form fields are available for use:</p>

<ul>
<li><a href="#ajax">ajax</a></li>
<li><a href="#friends_entry_id">friends_entry_id[]</a></li>
<li><a href="#friends_group_id_f">friends_group_id[]</a></li>
<li><a href="#friends_notification_template">friends_notification_template</a></li>
<li><a href="#friends_remove">friends_remove</a></li>
<li><a href="#friends_subject">friends_subject</a></li>
</ul>

<p><a name="ajax"></a></p>

<h3>ajax</h3>

<pre class="brush: html;">&lt;input type="hidden" name="ajax" value="yes" /&gt;</pre>

<p>This form field tells the method to behave nicely with AJAX calls.</p>

<p><a name="friends_entry_id"></a></p>

<h3>friends_entry_id[]</h3>

<pre class="brush: html;">&lt;input type="checkbox" name="friends_entry_id[]" value="{entry_id}" /&gt;</pre>

<p>This form field is necessary to submit the channel
entry ID to the <em>Friends:Group_Entry_Add</em> template. Using <strong>[]</strong> in the
form name allows you to have multiple check boxes within a list of
channel entries so a user can select multiple entries to be assigned to a
Group when submitting the form as a POST.</p>

<p><a name="friends_group_id_f"></a></p>

<h3>friends_group_id[]</h3>

<pre class="brush: html;">&lt;input type="hidden" name="friends_group_id[]" value="{friends_group_id}" /&gt;</pre>

<p>This form field is necessary to submit the group
ID to the <em>Friends:Group_Entry_Add</em> template. Using <strong>[]</strong> in the form
name allows you to have a multiple select field of Friends groups so a
user can select multiple groups for a channel entry to be assigned to
when submitting the form as a POST.</p>

<p><a name="friends_notification_template"></a></p>

<h3>friends_notification_template</h3>

<pre class="brush: html;">&lt;input type="hidden" name="friends_notification_template" value="friends_notifications/group_entry_add" /&gt;</pre>

<p>This form field allows you specify an
EE template to generate and format a notification to all of the members
of the group, informing them of the new entry added. If this is not
specified, a notification will NOT be sent.</p>

<p><a name="friends_remove"></a></p>

<h3>friends_remove</h3>

<pre class="brush: html;">&lt;input type="checkbox" name="friends_remove" value="yes" /&gt;
&lt;label for="friends_remove"&gt;Remove?&lt;/label&gt;
</pre>

<!-- force split -->

<pre class="brush: html;">&lt;input type="hidden" name="friends_remove" value="yes" /&gt;
</pre>

<p>This form field is used to allow a user to remove a
channel entry from a group when the value for this field is <strong>yes</strong>. An
entry can ONLY be removed IF one of the following applies: 1) the logged
in user was the original submitter of the entry to the group; 2) the
logged in user is the owner of the group that the entry is assigned to;
or 3) the logged in user is a Super Admin.</p>

<p><a name="friends_subject"></a></p>

<h3>friends_subject</h3>

<pre class="brush: html;">&lt;input
    type="hidden"
    name="friends_subject"
    value="A new entry titled {title} has been added to your group"
/&gt;
</pre>

<p>This form field allows you specify the subject line
message to generate for an email notification to all of the members of
the group, informing them of the new entry added.</p>

<p><a name="examples"></a></p>

<h2>Examples</h2>

<p>The following code should be a complete example for using this function:</p>

<pre class="brush: html;">{exp:friends:group_entry_add}

    {if success}
        &lt;h3&gt;Successful!&lt;/h3&gt;
    {/if}
    {if failure}
        &lt;h3&gt;Error!&lt;/h3&gt;
    {/if}

    &lt;p&gt;{friends_message}&lt;/p&gt;

{/exp:friends:group_entry_add}
</pre>

<p><a name="setup"></a></p>

<h2>Setup</h2>

<p>To implement this feature (including email notifications to group
members) into a template for viewing a single entry, your code might
look like this:</p>

<pre class="brush: html;">{exp:channel:entries}

    &lt;h2&gt;{title}&lt;/h2&gt;
    &lt;p&gt;{body}&lt;/p&gt;

{!-- Begin Group Entry Add form --}

    &lt;h4&gt;Add this entry to your Group&lt;/h4&gt;

    &lt;form method="post" action="{path='friends/group_entry_add'}/"&gt;

        &lt;input type="hidden" name="csrf_token" value="{csrf_token}"&gt;

        &lt;input type="hidden"
            name="friends_notification_template"
            value="friends_notifications/group_entry_add"
        /&gt;
        &lt;input type="hidden"
            name="friends_subject"
            value="A new entry titled {title} has been added to your group"
        /&gt;
        &lt;input type="hidden"
            name="friends_entry_id[]"
            value="{entry_id}"
        /&gt;

        &lt;select name="friends_group_id[]" multiple="multiple"&gt;
        {exp:friends:groups dynamic="off"}
            &lt;option value="{friends_group_id}"&gt;{friends_group_title}&lt;/option&gt;
        {/exp:friends:groups}
        &lt;/select&gt;

        &lt;input type="submit" name="submit" value="Add to Group" /&gt;

&lt;/form&gt;

{!-- End Group Entry Add form --}

{/exp:channel:entries}
</pre>

<p><a name="removing_entries_from_groups"></a></p>

<h2>Removing Entries from Groups</h2>

<p>To remove a channel entry from a Group, your code may look something like
this (submitting to a template with the <em>Group_Entry_Add</em> function):</p>

<pre class="brush: html;">&lt;ul&gt;
{exp:friends:group_entries group_name="{segment_3}"}
    &lt;li&gt;
        &lt;a href="{url_title_path='blog/article'}"&gt;{title}&lt;/a&gt;

        &lt;form method="post" action="{path='friends/group_entry_add'}/"&gt;
            &lt;input type="hidden" name="csrf_token" value="{csrf_token}"&gt;
            &lt;input type="hidden" name="friends_entry_id[]" value="{entry_id}" /&gt;
            &lt;input type="hidden" name="friends_group_id[]" value="{friends_group_id}" /&gt;
            &lt;input type="hidden" name="friends_remove" value="yes" /&gt;
            &lt;input type="submit" name="submit" value="Remove?" /&gt;
        &lt;/form&gt;
    &lt;/li&gt;
    {if no_results}
        &lt;li&gt;This group currently has no entries assigned to it.&lt;/li&gt;
    {/if}
{/exp:friends:group_entries}
&lt;/ul&gt;
</pre>

<p><a name="channel_form"></a></p>

<h2>Using with Channel Form</h2>

<p>To assign an entry you're currently publishing to a group, you can place the following code somewhere in your <a href="https://docs.expressionengine.com/v2/add-ons/channel/channel_form/index.html">Channel Form</a> tag. Your code may look something like this (WITHOUT submitting to a template with the
<em>Group_Entry_Add</em> function):</p>

<pre class="brush: html;">Tell your group(s) about this:

&lt;input type="hidden"
    name="friends_notification_template"
    value="friends_notifications/group_entry_add"
/&gt;
&lt;input type="hidden"
    name="friends_subject"
    value="A new entry titled {title} has been added to your group"
/&gt;

&lt;select name="friends_group_id[]" multiple="multiple"&gt;
{exp:friends:groups dynamic="off"}
    &lt;option value="{friends_group_id}"&gt;{friends_group_title}&lt;/option&gt;
{/exp:friends:groups}
&lt;/select&gt;
</pre>

<p><a name="notification_templates"></a></p>

<h2>Notification Templates</h2>

<p>For your notification templates, you use regular EE templates, and just
add code like this:</p>

<p><a name="user_adds_a_channel_entry_to_a_group"></a></p>

<h3>User adds a channel entry to a Group (“friends_notifications/group_entry_add”)</h3>

<pre class="brush: html;">Hello {friends_recipient_screen_name}!

{friends_sender_screen_name} just added a new channel
entry to {friends_group_title} group.

{entries}
    Title: {friends_title} ({site_url}/blog/article/{friends_url_title}/)
{/entries}

Click here to view more info about the group:
{site_url}/friends/view_group/{friends_group_name}/
</pre>
			</article>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shCore.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shAutoloader.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>