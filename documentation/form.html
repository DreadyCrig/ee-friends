<!DOCTYPE html>
<!--[if lt IE 7]>		<html class="no-js ie6"> <![endif]-->
<!--[if IE 7]>			<html class="no-js ie7"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie8"> <![endif]-->
<!--[if IE 8]>			<html class="no-js ie9"> <![endif]-->
<!--[if gt IE 9]><!-->	<html class="no-js"> <!--<![endif]-->
	<head lang="en">
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<title>Form | Friends | Solspace Addon Documentation</title>
		<meta name="description" content="" />
		<meta name="copyright" content="(c) 2010 Copyright content: Copyright design: Solspace, Inc."/>
		<meta name="viewport" content="width=device-width" />
		<link rel="stylesheet" href="assets/css/normalize.css" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" type="text/css" href="assets/fancybox/jquery.fancybox-1.3.4.css" />
		<link href="assets/syntaxhighlighter/styles/shCore.css" rel="stylesheet" type="text/css" />
		<link href="assets/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />
		<script src="assets/js/modernizr.min.js"></script>
	</head>
	<body>
		<!--[if lt IE 8]>
			<p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
		<![endif]-->

		<header>
			<div class="header-inner">
				<div class="logo">
					<img src="assets/images/logo.png" />
				</div>

				<div class="bread_crumbs">
					<ul class="crumbs">
						<li class="first"><a href="index.html">Friends</a></li>
						<li>Form</li>
					</ul>
				</div>
			</div>
		</header>

		<div class="content-wrapper">
			<nav class="toc">
				<ul>
<li><a href="https://solspace.com/expressionengine/friends">More Info | Purchase</a></li>
<li><a href="change_log.html">Change Log</a></li>
<li><a href="install_update.html">Install / Update</a></li>
<li><a href="control_panel.html">Control Panel</a></li>
<li><a href="extension_hooks.html">Extension Hooks</a></li>
<li class="template_tags"><h3>Template Tags</h3></li>
<li><p>Basic:</p>

<ul>
<li><a href="add.html">Add</a></li>
<li class="current"><a href="form.html">Form</a></li>
<li><a href="hug.html">Hug</a></li>
<li><a href="hugs.html">Hugs</a></li>
<li><a href="invites.html">Invites</a></li>
<li><a href="members.html">Members</a></li>
<li><a href="mine.html">Mine</a></li>
<li><a href="mutual_friends.html">Mutual Friends</a></li>
</ul></li>
<li><p>Profile Wall:</p>

<ul>
<li><a href="profile_wall.html">Profile Wall</a></li>
<li><a href="profile_wall_comment_delete.html">Profile Wall Comment Delete</a></li>
<li><a href="profile_wall_form.html">Profile Wall Form</a></li>
</ul></li>
<li><p>Status Updates:</p>

<ul>
<li><a href="status.html">Status</a></li>
<li><a href="status_delete.html">Status Delete</a></li>
<li><a href="status_form.html">Status Form</a></li>
</ul></li>
<li><p>Groups:</p>

<ul>
<li><a href="groups.html">Groups</a></li>
<li><a href="group_add.html">Group Add</a></li>
<li><a href="group_delete.html">Group Delete</a></li>
<li><a href="group_entries.html">Group Entries</a></li>
<li><a href="group_entry_add.html">Group Entry Add</a></li>
<li><a href="group_form.html">Group Form</a></li>
<li><a href="group_members.html">Group Members</a></li>
<li><a href="member_of_group.html">Member Of Group</a></li>
<li><a href="group_wall.html">Group Wall</a></li>
<li><a href="group_wall_comment_delete.html">Group Wall Comment Delete</a></li>
<li><a href="group_wall_form.html">Group Wall Form</a></li>
</ul></li>
<li><p>Messages:</p>

<ul>
<li><a href="messages.html">Messages</a></li>
<li><a href="message_delete.html">Message Delete</a></li>
<li><a href="message_folders.html">Message Folders</a></li>
<li><a href="message_folder_form.html">Message Folder Form</a></li>
<li><a href="message_folder_name.html">Message Folder Name</a></li>
<li><a href="message_form.html">Message Form</a></li>
<li><a href="message_move.html">Message Move</a></li>
</ul></li>
<li><p>Referrals:</p>

<ul>
<li><a href="referral_invite_form.html">Referral Invite Form</a></li>
<li><a href="referral_referral_count.html">Referral Count</a></li>
</ul></li>
<li><h3>Requirements</h3><div class="requirements">

<ul>
<li>EE 2.10.x</li>
<li>PHP 5.2+</li>
<li>MySQL 5+</li>
<li>All modern browsers or IE 10+</li>
</ul></div></li>
</ul>
			</nav>

			<article class="docs">
				<p>The <em>Friends:Form</em> function allows your users to add/confirm/remove multiple friends within 1 submission. It's an alternate method to using the <a href="add.html">Friends:Add</a> method. it displays a list of either all current friends, or all site members. Upon form submission, the <em>Friends:Form</em> function will output relevant message(s), and will take care of the rest. Additionally, notifications can be sent out to other members when you request or confirm them as a friend.</p>

<pre class="brush: html;">{exp:friends:form} content {/exp:friends:form}</pre>

<ul>
<li><a href="#parameters">Parameters</a></li>
<li><a href="#variables">Variables</a></li>
<li><a href="#variable_pairs">Variable Pairs</a></li>
<li><a href="#conditionals">Conditionals</a></li>
<li><a href="#form_fields">Form Fields</a></li>
<li><a href="#examples">Examples</a></li>
<li><a href="#notifications">Notification Templates</a></li>
</ul>

<p><a name="parameters"></a></p>

<h2>Parameters</h2>

<p>The following parameters are available for use:</p>

<ul>
<li><a href="#dynamic">dynamic</a></li>
<li><a href="#form_name">form_name</a></li>
<li><a href="#form_id">form_id</a></li>
<li><a href="#group_id">group_id</a></li>
<li><a href="#limit">limit</a></li>
<li><a href="#p_member_id">member_id</a></li>
<li><a href="#notification_confirm">notification_confirm</a></li>
<li><a href="#notification_request">notification_request</a></li>
<li><a href="#onsubmit">onsubmit</a></li>
<li><a href="#orderby">orderby</a></li>
<li><a href="#return">return</a></li>
<li><a href="#search_screen_name">search_screen_name</a></li>
<li><a href="#search_username">search_username</a></li>
<li><a href="#sort">sort</a></li>
<li><a href="#subject_confirm">subject_confirm</a></li>
<li><a href="#subject_request">subject_request</a></li>
<li><a href="#type">type</a></li>
<li><a href="#username">username</a></li>
</ul>

<p><a name="dynamic"></a></p>

<h3>dynamic=</h3>

<pre class="brush: html;">dynamic="off"</pre>

<p>This parameter is available to stop the loop from looking into
the URI for an ID of any type.</p>

<p><a name="form_name"></a></p>

<h3>form_name=</h3>

<pre class="brush: html;">form_name="your_form_name"</pre>

<p>This parameter allows you to establish a name attribute for the form.</p>

<p><a name="form_id"></a></p>

<h3>form_id=</h3>

<pre class="brush: html;">form_id="your_form_id"</pre>

<p>This parameter allows you to establish an ID attribute for the
form.</p>

<p><a name="group_id"></a></p>

<h3>group_id=</h3>

<pre class="brush: html;">group_id="5|6|9"</pre>

<p>This parameter allows you to filter the list of members in
the form by one or more group ID's. Separate multiple groups with the
pipe (<strong>|</strong>) character.</p>

<p><a name="limit"></a></p>

<h3>limit=</h3>

<pre class="brush: html;">limit="10"</pre>

<p>This parameter controls how many results will be outputted. The
limit will default to <strong>100</strong> members if a value is not specified.</p>

<p><a name="member_id"></a></p>

<h3>member_id=</h3>

<pre class="brush: html;">member_id="{segment_3}"</pre>

<p>This parameter allows you view a list of friends for a
specific member by specifying their member ID. You can hardcode a member
ID, pass it through an embed, or grab it from the URI. Alternatively,
you can use the <a href="#username">username</a> parameter.</p>

<p><a name="notification_confirm"></a></p>

<h3>notification_confirm=</h3>

<pre class="brush: html;">notification_confirm="friends_notifications/friend_confirm"</pre>

<p>This parameter controls which EE template to use
for your friend confirm notification template. This is the template that
will be used for the message that someone receives when their friend
request has been confirmed by the other user.</p>

<p><a name="notification_request"></a></p>

<h3>notification_request=</h3>

<pre class="brush: html;">notification_request="friends_notifications/friend_request"</pre>

<p>This parameter controls which EE template to use
for your friend request notification template. This is the template that
will be used for the message that someone receives when a user has
requested to be friends with them.</p>

<p><a name="onsubmit"></a></p>

<h3>onsubmit=</h3>

<pre class="brush: html;">onsubmit="some_javascript()"</pre>

<p>This parameter allows you to execute Javascript functions at
form submission.</p>

<p><a name="orderby"></a></p>

<h3>orderby=</h3>

<pre class="brush: html;">orderby="screen_name"</pre>

<p>This parameter gives you the ability to control the order in
which your results are ordered in the list. You can order by any
variable that you can parse on as well as <strong>random</strong>.</p>

<p><a name="return"></a></p>

<h3>return=</h3>

<pre class="brush: html;">return="template_group/template"</pre>

<p>This parameter allows you to return the user to a specified
template upon successful submittal of form.</p>

<p><a name="search_screen_name"></a></p>

<h3>search_screen_name=</h3>

<pre class="brush: html;">search_screen_name="ja"</pre>

<p>This parameter allows you to filter the member
list by those members who share the same first few letters of their
screen name. For example, if you specify <strong>ja</strong> in the parameter, your
results may be <em>Jason</em>, <em>Janet</em>, <em>Jared</em>, etc. It's not necessary to
specify this parameter though. If you have an additional segment in the
URI named <em>screen_name</em>, followed by a value, the search will be
performed automatically, as long as the <a href="#dynamic">dynamic</a> parameter is
NOT set to <strong>off</strong>.</p>

<p><a name="search_username"></a></p>

<h3>search_username=</h3>

<pre class="brush: html;">search_username="fur"</pre>

<p>This parameter allows you to filter the member list by
those members who share the same first few letters of their username.
For example, if you specify <strong>fur</strong> in the parameter, your results may be
<em>furly</em>, <em>furby</em>, <em>furnace_eater</em>, etc. It's not necessary to specify
this parameter though. If you have an additional segment in the URI
named <em>username</em>, followed by a value, the search will be performed
automatically, as long as the <a href="#dynamic">dynamic</a> parameter is NOT set
to <strong>off</strong>.</p>

<p><a name="sort"></a></p>

<h3>sort=</h3>

<pre class="brush: html;">sort="desc"</pre>

<p>You can sort by <strong>asc</strong> or <strong>desc</strong>.</p>

<p><a name="subject_confirm"></a></p>

<h3>subject_confirm=</h3>

<pre class="brush: html;">subject_confirm="{friends_inviter_screen_name} has confirmed you as a Friend!"</pre>

<p>This parameter outputs the subject line for the
notification email when a user is confirming a friend request.</p>

<p><a name="subject_request"></a></p>

<h3>subject_request=</h3>

<pre class="brush: html;">subject_request="{friends_inviter_screen_name} has added you as a Friend!"</pre>

<p>This parameter outputs the subject line for the
notification email when a user is initiating a friend request.</p>

<p><a name="type"></a></p>

<h3>type=</h3>

<pre class="brush: html;">type="mine"</pre>

<p>This parameter allows you to designate which type of member list
to retrieve. Indicating <strong>mine</strong> will display a list of your friends.
Indicating <strong>member</strong> will display a list of all members of the site.</p>

<p><a name="username"></a></p>

<h3>username=</h3>

<pre class="brush: html;">username="{segment_3}"</pre>

<p>This parameter allows you view a list of friends for a
specific member by specifying their username. You can hardcode a
username, pass it through an embed, or grab it from the URI.
Alternatively, you can use the <a href="#member_id">member_id</a> parameter.</p>

<p><a name="variables"></a></p>

<h2>Variables</h2>

<p>All <a href="members.html#variables">standard and custom member fields and usual Friends
variables</a>
are available for use here. Additionally, these exist as well:</p>

<ul>
<li><a href="#friends_invitee_member_field">friends_invitee_member_field</a></li>
<li><a href="#friends_inviter_member_field">friends_inviter_member_field</a></li>
</ul>

<p><a name="friends_invitee_member_field"></a></p>

<h3>friends_invitee_member_field</h3>

<pre class="brush: html;">{friends_invitee_member_field}</pre>

<p>You can parse standard member fields for both the invitee and inviter
for use in the <a href="#notifications">Notification Templates</a> as well as the
<a href="#subject_request">subject_request</a> and
<a href="#subject_confirm">subject_confirm</a> parameters. To parse standard
member fields for the invitee, prepend your variables with
<em>friends_invitee&#95;</em>. To construct this variable, simply use
<strong>friends_invitee&#95;</strong> + <strong>member_field_name</strong>.</p>

<p><a name="friends_inviter_member_field"></a></p>

<h3>friends_inviter_member_field</h3>

<pre class="brush: html;">{friends_inviter_member_field}</pre>

<p>You can parse standard member fields for both the invitee and inviter
for use in the <a href="#notifications">Notification Templates</a> as well as the
<a href="#subject_request">subject_request</a> and
<a href="#subject_confirm">subject_confirm</a> parameters. To parse standard
member fields for the inviter, prepend your variables with
<em>friends_inviter&#95;</em>. To construct this variable, simply use
<strong>friends_inviter&#95;</strong> + <strong>member_field_name</strong>.</p>

<p><a name="variable_pairs"></a></p>

<h2>Variable Pairs</h2>

<p>The following variable pairs are available for use:</p>

<ul>
<li><a href="#invites">invites</a></li>
<li><a href="#members">members</a></li>
</ul>

<p><strong>Note:</strong> You cannot use both variable pairs together in the same form.
They must each be used seperately.</p>

<p><a name="invites"></a></p>

<h3>invites</h3>

<pre class="brush: html;">{invites} {/invites}</pre>

<p>This variable pair will display all "incoming" friend requests
from other users, and is used to establish the formatting of each row of
results contained inside your form. This way, you can quickly check off
all friend requests you wish to confirm or remove.</p>

<p><a name="members"></a></p>

<h3>members</h3>

<pre class="brush: html;">{members} {/members}</pre>

<p>This variable pair is used to establish the formatting of each
row of the member list that will be contained inside your form.</p>

<p><a name="conditionals"></a></p>

<h2>Conditionals</h2>

<p>You can run conditionals on any of the single variables available above.
Additionally, these exist as well:</p>

<ul>
<li><a href="#if_friend">friend</a></li>
</ul>

<p><a name="if_friend"></a></p>

<h3>if friend</h3>

<pre class="brush: html;">{if friend == "y"}{/if}</pre>

<p>This conditional determines whether or not a given member in
your list has been added to your friends list. It will return either <strong>y</strong>
or <strong>n</strong>. You would normally use this as a conditional.</p>

<p><a name="form_fields"></a></p>

<h2>Form Fields</h2>

<p>The following form fields are available for use:</p>

<ul>
<li><a href="#friends_delete">friends_delete</a></li>
<li><a href="#friends_member_id">friends_member_id</a></li>
</ul>

<p><a name="friends_delete"></a></p>

<h3>friends_delete</h3>

<pre class="brush: html;">&lt;input type="checkbox" name="friends_delete" value="yes" /&gt;</pre>

<p>This field allows your users to remove the selected
members from their list of friends when they submit the form. If this
checkbox is selected, it will remove any friends the user has selected
in the list upon submission. If left unchecked, the members selected in
the list will be invited/confirmed.</p>

<p><a name="friends_member_id"></a></p>

<h3>friends_member_id</h3>

<pre class="brush: html;">&lt;input type="checkbox" name="friends_member_id[]" value="{friends_member_id}" /&gt;</pre>

<p>This field allows you to create a list of members
to either be added or deleted from a friends list. Make sure you specify
the name of the field with <strong>[ ]</strong> so that
the Friends module knows that an array of members is being submitted.</p>

<p><a name="examples"></a></p>

<h2>Examples</h2>

<p>The following example will display a list of all site members, allowing
a user to multi add or remove other members from their friends list (and
will send email notifications upon successful Friend requests/confirms):</p>

<pre class="brush: html;">&lt;h3&gt;Add or Delete Members to your account using the form below:&lt;/h3&gt;

{exp:friends:form
    type="member"
    return="friends/form/thanks"
    notification_request="friends_notifications/friend_request"
    notification_confirm="friends_notifications/friend_confirm"
    subject_request="{friends_inviter_screen_name} added you as a friend!"
    subject_confirm="{friends_inviter_screen_name} confirmed your friend request!"
}

    &lt;ul&gt;
    {members}
        &lt;li&gt;
            &lt;input type="checkbox" name="friends_member_id[]"
                id="member_{friends_member_id}" value="{friends_member_id}"
                {if friend == "y"}
                    checked="checked"
                {/if}
            /&gt;
            {if friend == "y"}
                &lt;label for="member_{friends_member_id}"&gt;
                    {friends_screen_name}
                &lt;/label&gt;
                &lt;small&gt;(already added)&lt;/small&gt;
            {if:else}
                &lt;label for="member_{friends_member_id}"&gt;
                    {friends_screen_name}
                &lt;/label&gt;
            {/if}
        &lt;/li&gt;
    {/members}
    &lt;/ul&gt;

    &lt;p&gt;&lt;input type="checkbox" name="friends_delete"
        id="friends_delete" value="yes" /&gt;
        &lt;label for="friends_delete"&gt;Delete?&lt;/label&gt;&lt;/p&gt;

    &lt;p&gt;&lt;input type="submit" name="submit" value="Submit" /&gt;&lt;/p&gt;

{/exp:friends:form}
</pre>

<p>The following example will display a list of all “incoming” friend
requests from other users, allowing a user to multi add or remove the
requests from their lists. (and will send email notifications upon
successful Friend confirmation):</p>

<pre class="brush: html;">&lt;h3&gt;Friend Requests Awaiting Confirmation:&lt;/h3&gt;

{exp:friends:form
    type="member"
    return="friends/form/thanks"
    notification_request="friends_notifications/friend_request"
    notification_confirm="friends_notifications/friend_confirm"
    subject_request="{friends_inviter_screen_name} added you as a friend!"
    subject_confirm="{friends_inviter_screen_name} confirmed your friend request!"
}

    &lt;ul&gt;
    {invites}
        &lt;li&gt;
            &lt;input type="checkbox" name="friends_member_id[]"
                id="member_{friends_member_id}" value="{friends_member_id}"
            /&gt;
            &lt;label for="invite_{friends_member_id}"&gt;
                {friends_screen_name}
            &lt;/label&gt;
            (requested {friends_entry_date format="%Y-%m-%d"})
        &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;&lt;input type="checkbox" name="friends_delete"
        id="friends_delete" value="yes" /&gt;
        &lt;label for="friends_delete"&gt;Delete?&lt;/label&gt;&lt;/p&gt;

    &lt;p&gt;&lt;input type="submit" name="submit" value="Submit" /&gt;&lt;/p&gt;

{/exp:friends:form}
</pre>

<p><a name="notifications"></a></p>

<h2>Notification Templates</h2>

<p>For your notification templates, you use regular EE templates, and just
add code like this:</p>

<p><a name="friend_request"></a></p>

<h3>Friend Request ("friends_notifications/friend_request")</h3>

<pre class="brush: html;">Hello {friends_invitee_screen_name}!

You have just received a Friend Request from
{friends_inviter_screen_name}.

Click the link below to accept this invitation:
{path='friends/add'}/{friends_inviter_member_id}/
</pre>

<p><a name="friend_confirm"></a></p>

<h3>Friend Confirm ("friends_notifications/friend_confirm")</h3>

<pre class="brush: html;">Hello {friends_invitee_screen_name}!

You are now friends with {friends_inviter_screen_name}
because they have accepted your invitation.

Click the link below to view their profile:
{path='friends/profile'}/{friends_inviter_member_id}/
</pre>
			</article>
		</div>

		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shCore.js"></script>
		<script src="assets/syntaxhighlighter/scripts/shAutoloader.js"></script>
		<script src="assets/js/main.js"></script>
	</body>
</html>